<div class="it">
    {% for row in stream.items %}
    <div class="stream stream--tiled o-grid-row">
        {# grid column styles added in css file due to complexity of handling the last column on tablet #}
        {% for column in row %}
            {% set colIndex = loop.index %}
            <div class="stream__column" data-column="{{colIndex}}">
            
                {% for article in column %}

                    <div class="stream__article-wrapper" data-track-pos="{{colIndex}}-{{loop.index}}">
                        {% if article.recommendation %}
                            <p class="recommended__by">Recommended by:
                                {% if article.recommendation.recommendedBy.id %}
                                    <a href="/users/{{ article.item.recommendation.recommendedBy.id }}/recommended">
                                        {{ article.item.recommendation.recommendedBy.name }}
                                    </a>
                                {% else %}
                                    {{ article.recommendation.recommendedBy.name }}        
                                {% endif %}
                                    on {{ article.recommendation.on|date('F jS, Y') }}
                            </p>
                        {% endif %}

                        {% if article.type === 'news' %}
                            {% include "../bower/next-article-card-component/templates/news.html" with { item: article} %}
                        {% elseif article.type === 'feature' %}
                            {% include "../bower/next-article-card-component/templates/feature.html" with { item: article } %}
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>